---
title: 【笔记】虚拟机配置
categories:
  - Big Data
date: 2020-01-30 23:35:25
---

## 前言

`Hadoop`集群虚拟机配置

<!-- more -->

## 虚拟机配置

> 硬盘：50G
> 内存：4G
> CPU：6\*2 2\*2
> `/boot`：200M
> `/` 全部

## 虚拟机准备

### 防火墙关闭

``` sh
service iptables stop
chkconfig iptables off
```

#### 确认

- 查看防火墙是否关闭

``` sh
service iptables status
chkconfig --list iptables
```

### 创建一般用户

- 创建`atguigu`用户

``` sh
useradd atguigu
```

- 创建密码

``` sh
passwd atguigu
```

#### 确认

- 查看是否有`atguigu`目录

``` sh
ll /home
```

### 创建 software module 目录

- 在`/opt`目录下创建`software`、`module`目录

``` sh
mkdir /opt/software /opt/module
```

- 更改权限

``` sh
chown atguigu:atguigu /opt/software /opt/module
```

#### 确认

- 查看目录是否创建成功
- 查看权限是否为atguigu

```
ll /opt/
```

### 配置策略

- 把`atguigu`用户添加到`sudoers`

``` sh
vim /etc/sudoers
```

- 在`## Allow root to run any commands anywhere`后添加一行

``` sh
atguigu ALL=(ALL) NOPASSWD:ALL
```

- 强制保存并退出

:wq!

#### 确认

- 切换用户

``` sh
su atguigu
```

- 执行`sudo` 命令是否报错

``` sh
sudo ls
```

### 改 Hosts 文件

- 编辑`hosts`文件

``` sh
vim /etc/hosts
```

- 在文件末尾追加

根据实际情况配置

``` sh
192.168.1.100 hadoop100
192.168.1.101 hadoop101
192.168.1.102 hadoop102
192.168.1.103 hadoop103
192.168.1.104 hadoop104
192.168.1.105 hadoop105
192.168.1.106 hadoop106
192.168.1.107 hadoop107
192.168.1.108 hadoop108
192.168.1.109 hadoop109
```

#### 确认

``` sh
cat /etc/hosts
```

### 改静态 ip

- 编辑`ifcfg-eth0`文件

``` sh
vim /etc/sysconfig/network-scripts/ifcfg-eth0
```

- 将文件内容替换为如下

``` sh
DEVICE=eth0
TYPE=Ethernet
ONBOOT=yes
BOOTPROTO=static
IPADDR=192.168.1.100
PREFIX=24
GATEWAY=192.168.1.2
DNS1=192.168.1.2
NAME=eth0
```

#### 确认

``` sh
cat /etc/sysconfig/network-scripts/ifcfg-eth0
```

### 改主机名

- 编辑`network`文件

``` sh
vim /etc/sysconfig/network
```

- 根据实际情况作修改

``` sh
HOSTNAME=hadoop100
```

#### 确认

``` sh
cat /etc/sysconfig/network
```

## 拍快照

## 参考文献

[哔哩哔哩——zhvsvd](https://www.bilibili.com/video/av64039568)

