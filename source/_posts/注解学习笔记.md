---
title: 【笔记】注解学习笔记
categories:
  - Java
date: 2020-07-27 21:35:39
---

## 前言

Java 注解 学习笔记
JDK1.5以后的新特性

<!-- more -->

## 注解的功能

### 编写文档

- 通过代码里标识的注解生成文档

> `<name>`：类名

``` sh
javadoc <name>.java
```

### 编译检查

- 通过代码里标识的注解让编译器能够实现基本的编译检查

### 代码分析

- 通过代码里标识的注解对代码进行分析

## JDK内置注解

### @Override

- 检查该方法是否为父类方法的重写方法

### @Deprecated

- 表示该方法已过时，不推荐使用，但仍能正常使用功能

### @SuppressWarnings

- 压制警告

#### 压制所有警告

``` java
@SuppressWarnings("all")
```

## 自定义注解

### 元注解

- 是定义注解的注解

#### @Target

- 定义注解的使用范围

> 参数
>> `ElementType.TYPE`：作用于类上
>> `ElementType.METHOD`：作用于方法上
>> `ElementType.FIELD`：作用于属性上

#### @Retention

- 定义注解的生命周期

> 参数
>> `RetentionPolicy.RUNTIME`：在运行时有效

#### @Documented

- 动态生成文档

#### @Inherited

- 是否允许子注解继承注解

### 定义注解

> `<name>`：注解名

``` java
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
@interface <name> {
    String value() default "";
}
```

- 如果没定义默认值，则必须在使用注解的时候赋值

### 使用注解

#### 使用属性默认值

> `<class>`：类名

``` java
@<name>(value)
class <class> {
    ...
}
```

#### value()属性不为默认值

> `<value>`：值

``` java
@<name>(value="<value>")
class <class> {
    ...
}
```

#### 简写

``` java
@<name>("<value>")
class <class> {
    ...
}
```

## 通过反射获取注解

``` java
/**
 * 定义一个名为Mapper的注解
 */
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
@interface Mapper {}

/**
 * 定义一个名为Select的注解
 */
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
@interface Select {
    String value();
}

/**
 * 分别在类上和方法上使用`@Mapper`和`@Select`注解，做测试
 */
@Mapper
interface GoodsDao {
    
    @Select("SELECT * FROM tb_goods")
    public abstract void findGoods();
    
}

public class Test {
    public static void main(String[] args) throws Exception {
        Class<?> cls = Class.forName("com.test.GoodsDao");
        
        /**
         * 判断是否存在`Mapper.class`注解
         */
        boolean flag = cls.isAnnotationPresent(Mapper.class);
        System.out.println(flag);
        
        /**
         * 获取已标注`Mapper.class`的注解
         * 如果不存在返回null，如果存在返回注解名
         */
        Mapper key = cls.getDeclaredAnnotation(Mapper.class);
        System.out.println(key);
        
        /**
         * 获取注解中的属性值
         */
        Method method = cls.getDeclaredMethod("findGoods");
        Select select = method.getDeclaredAnnotation(Select.class);
        String sql = select.value();
        System.out.println(sql);
        
    }
}

```

## 完成

