---
title: 【笔记】用户和组
categories:
  - Linux
date: 2020-06-22 19:37:48
---

## 前言

用户和组

<!-- more -->

## 用户

### 用户信息文件

#### 路径

- `/etc/passwd`

#### 每一行表达含义

- `用户名:密码占位符:UID:基本组GID:用户描述信息:家目录:解释器`

### 新建用户

> `<user>`：用户名

``` sh
useradd <user>
```

#### 指定参数

> `<option>`：选项，可有可无
>> `-u <uid>`：指定UID
>> `-g <group>`：指定基本组
>> `-G <group>`：指定附加组
>> `-d <home>`：指定家目录位置
>> `-s <shell>`：指定默认解释器
>>> `-s /sbin/nologin`：指定解释器为空

``` sh
useradd <option> <user>
```

### 查看用户信息

``` sh
id <user>
```

### 删除用户

``` sh
userdel <user>
```

#### 主目录一同删除

``` sh
userdel -r <user>
```

### 修改用户信息

``` sh
usermod <option> <user>
```

## 用户密码

### 密码信息文件

#### 路径

- `/etc/shadow`

#### 每一行表达含义

- `用户名:密码加密后的字符串:上一次修改密码的时间（从1970年1月1日开始算的天数）:密码最早能更改密码的时间（默认为0，表示任何时候都可以更改）:有效天数:距离有效时间x天时进行提醒（默认为7）:::`

### 修改密码

- root用户修改任何用户密码，可以不限制密码复杂度，但是会出现提示，无视即可

> `<option>`：选项，可有可无
>> `-l`：锁定账号
>> `-u`：解锁账号
>> `-d`：无密码
>> `-f`：强制用户下次登录时修改密码

``` sh
passwd <option> <user>
```

#### 修改自己密码

- 其他用户修改自己密码时，需要限制密码复杂度

``` sh
passwd
```

#### 取消交互式

> `<pwd>`：密码

``` sh
echo <pwd> | passwd --stdin <user>
```

## 组

### 组信息文件

#### 路径

- `/etc/group`

#### 每一行表达含义

- `组名:组密码占位符:GID:组成员列表`

### 新建组

> `<group>`：组名
> `<option>`：选项，可有可无
>> `-g <gid>`：指定GID
>> `-o`：与`-g`同时使用，表示新用户组的GID可以与系统已有用户组的GID相同

``` sh
groupadd <option> <group>
```

### 删除组

- 不能删除用户的基本组

``` sh
groupdel <group>
```

### 修改组信息

``` sh
groupmod <option> <group>
```

#### 修改组名

> `<name_new>`：新组名
> `<name_old>`：旧组名

``` sh
groupmod -n <name_new> <name_old>
```

### 切换组

- 如果一个用户同时属于多个用户组，那么用户可以在用户组之间切换，以便具有其他用户组的权限

#### 切换当前用户所在的组

``` sh
newgrp <group>
```

### 组成员信息文件

#### 路径

- `/etc/gshadow`

### 管理组内成员

#### 添加组成员

``` sh
gpasswd -a <user> <group>
```

#### 删除组成员

``` sh
gpasswd -d <user> <group>
```

## 完成

## 参考文献

[菜鸟笔记](https://www.runoob.com/linux/linux-user-manage.html)

